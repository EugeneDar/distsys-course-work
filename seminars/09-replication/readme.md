# Семинар 9: Репликация

Этот семинар разговорный, порисовать и поспрашивать.

1. Как решать задачу, когда я хочу иметь KV, который переживает падение одной любой ноды на время?
    - Копирование/запись данных на все ноды
    - Синхронная репликация на несколько нод
        - как выбирать куда? что будет если выбор будет не детерминированным? как сделать детерминированным?
        - а что делать когда будем пытаться сделать запрос на упавшую ноду? в принципе можно ничего не делать, просто фейлить запрос, пока нода не оживет, но если мы хотим продолжать обслуживать?
    - Sloppy quorum и hinted handoff
2. Какой оверхед на объём хранимых данных получается в предыдущем случае?
3. А как можно уменьшить оверхед?
    - если не помнят/не знают, можно дать подсказку: xor и что с ним можно сделать?
4. Знаете ли что такое RAID?
    - HDD диски это довольно старая штука, но спросить про плюсы и минусы hdd, ответы:
        1. раньше объём был небольшим, хотя щас это самые дешёвые гигабайты
        2. ломаются из-за механики
        3. медленные
    - Рассказать про RAID 0, 1, 10, 01
    - Проблема оверхеда всё ещё есть, её отлично решает RAID 4 и эволюция в RAID 5
    - Пример посложнее — RAID 6 и две функции
5. Как это всё связано с РС? Кто видит очень тесную связь между RAID и возможной архитектурой хранилищ данных?
    - Можно писать что-то типа userspace raid
    - На самом деле это называется широким термином erasure coding и с его помощью шардируют большие реалтайм хранилища (kv в том числе)
    - Рассказать в двух словах про LRC от Microsoft: https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/LRC12-cheng20webpage.pdf
